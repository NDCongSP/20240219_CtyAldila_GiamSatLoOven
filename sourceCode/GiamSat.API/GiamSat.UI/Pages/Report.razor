@page "/report"
@* @using GiamSat.Models *@

<div Class="rz-p-0 rz-p-md-12">
    @if (_dataReport == null)
    {
        <p><em>Loading...</em></p>
    }
    else
    {
        <RadzenRow Gap="2rem" Class="rz-p-0 rz-p-lg-4">
            <RadzenColumn SizeXS="12" SizeSM="12">
                <RadzenStack>
                    <RadzenFieldset Text="Lọc">
                        <RadzenRow AlignItems="AlignItems.Center">
                            <RadzenColumn SizeXS="12" SizeSM="8">
                                <RadzenRow AlignItems="AlignItems.Center">
                                    @* <RadzenColumn SizeXS=12 SizeSM="12">
                                        <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex rz-mt-0 rz-mb-0">Chọn lò</RadzenText>
                                        <RadzenDropDown @bind-Value="@_filterModel.OvenName" TextProperty="Text" ValueProperty="Value"
                                                        InputAttributes="@(new Dictionary<string,object>(){ { "aria-label", "buttons justify content" }})"
                                                        Data="@(Enum.GetValues(typeof(int)).Cast<int>().Select(t => new { Text = $"{t}", Value = t }))"
                                                        Size="ButtonSize.Small" Style="width:100%" />
                                    </RadzenColumn> *@
                                    <RadzenColumn SizeXS=12 SizeSM="6">
                                        <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex rz-mt-0 rz-mb-0">Thời gian bắt đầu</RadzenText>
                                        <RadzenDatePicker @bind-Value=@_filterModel.FromDate Name="RadzenDatePickerBindValue" ShowCalendarWeek />
                                    </RadzenColumn>
                                    <RadzenColumn SizeXS=12 SizeSM="6">
                                        <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex rz-mt-0 rz-mb-0">Thời gian kết thúc</RadzenText>
                                         <RadzenDatePicker @bind-Value=@_filterModel.ToDate Name="RadzenDatePickerBindValue" ShowCalendarWeek />
                                    </RadzenColumn>
                                </RadzenRow>
                            </RadzenColumn>
                            <RadzenColumn SizeXS="12" SizeSM="4">
                                <RadzenRow AlignItems="AlignItems.Center">
                                    <RadzenColumn SizeXS="12" SizeSM="6">
                                        <RadzenButton Variant="Variant.Flat" Shade="Shade.Dark" Text="Truy vấn" Icon="add_circle" ButtonStyle="ButtonStyle.Dark"
                                                      Click=@(args => QueryData())>

                                        </RadzenButton>
                                    </RadzenColumn>
                                    <RadzenColumn SizeXS="12" SizeSM="6">
                                        <RadzenButton Variant="Variant.Flat" Shade="Shade.Dark" Text="Tải về" Icon="add_circle" ButtonStyle="ButtonStyle.Dark"
                                                      Click=@(args => QueryData())>

                                        </RadzenButton>
                                    </RadzenColumn>
                                </RadzenRow>
                            </RadzenColumn>
                        </RadzenRow>
                    </RadzenFieldset>
                </RadzenStack>
            </RadzenColumn>
        </RadzenRow>
        <RadzenRow>
            <RadzenColumn SizeXS="12" SizeSM="12">
                <RadzenDataGrid @ref="_dataReportGrid" Data="_dataReport" TItem="FT03"
                                AllowFiltering="true" FilterPopupRenderMode="PopupRenderMode.OnDemand"
                                AllowPaging="true" PageSize="5" AllowSorting="true"
                                ShowPagingSummary=@_showPagerSummary PagingSummaryFormat="@_pagingSummaryFormat" PageSizeOptions="@_pageSizeOptions">
                    <Columns>
                        <RadzenDataGridColumn TItem="FT03" Property="OvenId" Title="Oven Id" />
                        <RadzenDataGridColumn TItem="FT03" Property="OvenName" Title="Tên lò" />
                        <RadzenDataGridColumn TItem="FT03" Property="Temperature" Title="Nhiệt độ (oC)" />
                        <RadzenDataGridColumn TItem="FT03" Property="CreatedDate" Title="Ngày" />

                    </Columns>
                </RadzenDataGrid>
            </RadzenColumn>
        </RadzenRow>
    }
</div>